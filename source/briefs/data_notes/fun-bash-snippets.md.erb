

## Make a SQL table

~~~sh
MYSQLITEDB=SOMEDATABASEFILE.sqlite
# the command
sqlite3 $MYSQLITEDB \
<<< "
.headers on
SELECT *
FROM inspections
LIMIT 5;
" |
sed 's/^/|/' | sed 's/$/|/' |
sed -e '1a\
|-' | sed -e '$a\
{:.table-sql}'
~~~

Alternatively:

~~~sh
function qtq(){
  sed -e '1i\
  .headers on
' | sqlite3 $MYSQLITEDB |
sed 's/^/|/' | sed 's/$/|/' |
sed -e '1a\
|-' | sed -e '$a\
{:.table-sql}'
}
~~~


Or:

~~~sh
function qtq(){
  sed -e '1i\
.headers on' | 
  sqlite3 $MYSQLITEDB |
  csvformat -d \| |
  csvlook |
  sed -e '$a\
{:.table-sql}'
}
~~~


Sample usage:

~~~sh
echo "SELECT name, address
FROM businesses
WHERE name LIKE 'PIZZA%'
LIMIT 5;" | sqlite3 $MYSQLITEDB | csvformat -d \| | csvlook |
sed -e '$a\
{:.table-sql}'
~~~



Usage:

~~~sh
$ qtq <<< "SELECT * FROM sometable;"
~~~

Or better yet:

~~~sh
$ pbpaste | qtq | pbcopy
~~~


Or even better:

~~~sh
$ pbpaste | qtq | tee /dev/tty | pbcopy
~~~


Things I learned:

- Standard input syntax for strings
- How to append a line with sed
- Refreshed my memory on standard input for functions
- Finally used `tee` properly
- Discovered `/dev/tty`
- Learned how to pipe into sqlite3
- how to use realpath





# uploading to AWS

~~~sh
# set FNAME
ZNAME=$FNAME.zip
zip $ZNAME $FNAME
aws s3 cp $ZNAME s3://stash.padjo.org/dumps/2015/$ZNAME --acl=public-read 
  
  
~~~
